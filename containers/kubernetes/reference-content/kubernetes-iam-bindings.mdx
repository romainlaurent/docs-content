---
meta:
  title: Kubernetes IAM bindings
  description: This page provides information about the different control plane offers available for Scaleway Kubernetes Kapsule and Kosmos
content:
  h1: Kubernetes IAM bindings
  paragraph: This page provides information about the different control plane offers available for Scaleway Kubernetes Kapsule and Kosmos
tags: kubernetes control plane control-plane offers dedicated mutualized
dates:
  validation: 2023-09-26
  posted: 2023-09-26
categories:
  - kubernetes
---

## Situations

## User has AllProductFullAccess

<Tabs id="tabs-AllProductFullAccess">
  <TabsTab label="IAM">
    * `secret_key`: `ae2d4faf-2402-422b-890a-1ce29a45c101`

    * GetAuthContext
        * `bearer_id`: `773989c0-607c-4bb8-a5b8-867581b4e8d2
        * `auth_id`: `f1d92007-5825-46f4-8843-8438197a2825``

    * GetPermissions
        * `{ service_name: kubernetes, name: cluster, action: [ read ] }` **GRANTED**
        * `{ service_name: kubernetes, name: cluster, action: [ write ] }` **DENIED**
        * `{ service_name: kubernetes, name: group_system_masters , action: [ access ] }` **DENIED**
    </TabsTab>
    <TabsTab label="TokenReview">
    ```yaml
    {
    "apiVersion": "authentication.k8s.io/v1",
    "kind": "TokenReview",
    "status": {
        "authenticated": true,
        "user": {
        "username": "scaleway:bearer:773989c0-607c-4bb8-a5b8-867581b4e8d2",
        "uid": "773989c0-607c-4bb8-a5b8-867581b4e8d2",
        "groups": [
            "scaleway:groups:????????",
            "scaleway:groups:!!!!!!!!",
        ],
      },
     }
    }
    ```
  </TabsTab>
  <TabsTab label=""
</Tabs>


Role+Bindings example for Users & Groups

Example giving all access to a namespace  example-namespace to Group scaleway:groups:3972be4a-43d9-43da-9a55-195f1de9b770:Devops :

---
kind: Role
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: devops-example-namespace-full-access
  namespace: example-namespace
rules:
- apiGroups: [""]
  resources: ["*"]
  verbs: ["*"]
- apiGroups: ["extensions"]
  resources: ["*"]
  verbs: ["*"]

---
kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: devops-rolebinding
  namespace: example-namespace
subjects:
- kind: Group
  name: scaleway:groups:3972be4a-43d9-43da-9a55-195f1de9b770:Devops
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: Role
  name: devops-example-namespace-full-access
  apiGroup: rbac.authorization.k8s.io



Example giving read access to a namespace  example-namespace to User scaleway:bearer:773989c0-607c-4bb8-a5b8-867581b4e8d2 :

---
kind: Role
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: toto-read
  namespace: example-namespace
rules:
- apiGroups: [""]
  resources: ["*"]
  verbs: ["list", "get"]
- apiGroups: ["extensions"]
  resources: ["*"]
  verbs: ["list","get"]

---
kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: toto-rolebinding
  namespace: example-namespace
subjects:
- kind: User
  name: scaleway:bearer:773989c0-607c-4bb8-a5b8-867581b4e8d2
  apiGroup: rbac.authorization.k8s.io
roleRef:
  kind: Role
  name: toto-read
  apiGroup: rbac.authorization.k8s.io

 